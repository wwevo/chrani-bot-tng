{%- from 'jinja2_macros.html' import construct_toggle_link with context  -%}
{# set this to 'false' for debug purposes, to see the offline state, set it to 'server_is_online' for regular use #}
{%- set server_is_online = server_is_online -%}
<div class="{%- if server_is_online == true -%}active{%- else -%}inactive{%- endif -%}">
<span>The server is <strong>{%- if server_is_online == true -%}online{%- else -%}offline{%- endif -%}</strong> {% if shutdown_in_seconds == none %}{{ construct_toggle_link(
        server_is_online,
        "shutdown", ['widget_event', ['telnet', ['shutdown', {"timer": '30', "action": "trigger_shutdown"}]]]
)}}{%- else %} {{ construct_toggle_link(
        server_is_online,
        "cancel", ['widget_event', ['telnet', ['shutdown', {"cancel": 1, "action": "cancel_shutdown"}]]]
)}} {{ shutdown_in_seconds }} seconds to {{ construct_toggle_link(
        server_is_online,
        "shutdown", ['widget_event', ['telnet', ['shutdown', {"force": 1, "action": "forced_shutdown"}]]]
)}}{%- endif -%}</span>
</div>
